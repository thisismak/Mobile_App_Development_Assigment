<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>開源硬體清單</title>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css" />
    <script src="https://unpkg.com/ionicons@latest/dist/ionicons.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      /* 原有樣式保持不變 */
      ion-card { 
        margin: 1rem; 
        box-shadow: 0 4px 8px rgba(0,0,0,0.1); 
        border-radius: 8px; 
        overflow: hidden; 
        animation: fadeIn 0.3s ease-in forwards; 
      }
      /* ... 其他現有樣式 ... */

      /* 新增 Apps 頁面樣式 */
      .apps-page {
        padding: 1rem;
      }
      .app-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
      }
      .app-card {
        text-align: center;
        padding: 1rem;
        cursor: pointer;
      }
      .app-card:hover {
        background-color: var(--ion-color-light);
      }
      .app-icon {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
      }
    </style>
  </head>
  <body>
    <ion-app>
      <ion-header>
        <ion-toolbar color="primary">
          <ion-title>開源硬體清單</ion-title>
          <ion-buttons slot="end" class="view-toggle">
            <ion-button id="toggleListView">
              <ion-icon name="list-outline"></ion-icon>
            </ion-button>
            <ion-button id="toggleGridView">
              <ion-icon name="grid-outline"></ion-icon>
            </ion-button>
            <!-- 新增 Apps 按鈕 -->
            <ion-button id="appsButton">
              <ion-icon name="apps-outline"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
        <!-- 原有搜尋欄和篩選條件 -->
        <ion-searchbar placeholder="搜尋產品名稱或功能..." color="light"></ion-searchbar>
        <!-- ... 其他原有內容 ... -->
      </ion-header>

      <ion-content>
        <!-- 主頁內容 -->
        <div id="mainContent">
          <div id="hardwareList" class="list-view"></div>
          <div id="statsChartContainer">
            <canvas id="statsChart"></canvas>
          </div>
        </div>

        <!-- 新增 Apps 頁面 -->
        <div id="appsContent" style="display: none;" class="apps-page">
          <ion-toolbar>
            <ion-title>應用程式</ion-title>
            <ion-buttons slot="end">
              <ion-button id="backButton">
                <ion-icon name="arrow-back-outline"></ion-icon>
                返回
              </ion-button>
            </ion-buttons>
          </ion-toolbar>
          <div class="app-grid">
            <ion-card class="app-card">
              <ion-icon name="calculator-outline" class="app-icon"></ion-icon>
              <div>計算器</div>
            </ion-card>
            <ion-card class="app-card">
              <ion-icon name="document-text-outline" class="app-icon"></ion-icon>
              <div>記事本</div>
            </ion-card>
            <ion-card class="app-card">
              <ion-icon name="time-outline" class="app-icon"></ion-icon>
              <div>時鐘</div>
            </ion-card>
            <ion-card class="app-card">
              <ion-icon name="settings-outline" class="app-icon"></ion-icon>
              <div>設定</div>
            </ion-card>
          </div>
        </div>
      </ion-content>
    </ion-app>

    <script>
      // 原有 JavaScript 代碼
      const hardwareData = {
        // ... 原有內容 ...
      };

      const uiController = {
        // ... 原有方法 ...
        
        // 新增頁面切換方法
        showAppsPage() {
          document.getElementById('mainContent').style.display = 'none';
          document.getElementById('appsContent').style.display = 'block';
        },

        showMainPage() {
          document.getElementById('mainContent').style.display = 'block';
          document.getElementById('appsContent').style.display = 'none';
        }
      };

      const filterController = {
        // ... 原有方法 ...
        
        bindEvents() {
          // 原有事件綁定
          this.searchBar.addEventListener("ionInput", () => this.applyFiltersAndSort());
          // ... 其他原有事件 ...

          // 新增 Apps 按鈕事件
          document.getElementById('appsButton').addEventListener('click', () => {
            uiController.showAppsPage();
          });

          // 新增返回按鈕事件
          document.getElementById('backButton').addEventListener('click', () => {
            uiController.showMainPage();
          });
        }
      };

      // 初始化
      try {
        uiController.init();
        filterController.init();
        filterController.bindEvents();
        uiController.updateList(hardwareData.items);
      } catch (error) {
        console.error("應用程式初始化失敗:", error);
        document.querySelector("ion-content").innerHTML = `
          <ion-card color="danger">
            <div class="card-content">應用程式載入失敗，請重新整理</div>
          </ion-card>
        `;
      }
    </script>
  </body>
</html>